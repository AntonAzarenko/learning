<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.azarenka.repository.FurnitureRepository">

    <resultMap type="Furniture" id="furniture">
        <id column="id" property="id"/>
        <result column="title" property="title"/>
        <result column="height" property="height"/>
        <result column="width" property="width"/>
        <result column="long" property="m_long"/>
        <result column="price" property="price"/>
        <association property="type_id" javaType="Type">
            <result column="type" property="type"/>
        </association>
    </resultMap>

    <select id="findFurniture" resultType="Furniture">
        SELECT DISTINCT
        f.id,
        f.title,
        t.type
        height,
        width,
        long,
        price
        FROM
        main.furniture f
        join main.manufacturer m ON m.title=#{name}
        join main.type t ON t.id = f.type_id
        join main.maker_to_furniture_map mF On m.id = f.id
        where price > #{cost};
    </select>
</mapper>